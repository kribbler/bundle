(function(e,t,n){"use strict";function i(e,n){var r,i,s=n;this.pause=function(){t.clearTimeout(r);s-=new Date-i};this.resume=function(){i=new Date;r=t.setTimeout(e,s)};this.resume()}var r=t.Modernizr;e.CBPQTRotator=function(t,n){this.$el=e(n);this._init(t)};e.CBPQTRotator.defaults={speed:700,easing:"ease",interval:4e3};e.CBPQTRotator.prototype={_init:function(t){this.options=e.extend(true,{},e.CBPQTRotator.defaults,t);if(this.$el.data("interval")){this.options.interval=this.$el.data("interval")}this._config();this.$items.eq(this.current).addClass("cbp-qtcurrent");if(this.support){this._setTransition()}this._startRotator();var n=this;this.$el.hover(function(){n._pause()},function(){if(n.pauseOn){n._start()}n.pauseOn=true});this.nextBtn.click(function(e){e.preventDefault();n._changeSlide("next")});this.prevBtn.click(function(e){e.preventDefault();n._changeSlide("prev")})},_config:function(){this.pauseOn=true;this.$items=this.$el.children("div.cbp-qtcontent");this.nextBtn=this.$el.find("div.cbp-next");this.prevBtn=this.$el.find("div.cbp-prev");this.itemsCount=this.$items.length;this.current=0;this.support=r.csstransitions;if(this.support){this.$progress=e('<span class="cbp-qtprogress"></span>').appendTo(this.$el)}},_setTransition:function(){setTimeout(e.proxy(function(){this.$items.css("transition","opacity "+this.options.speed+"ms "+this.options.easing)},this),25)},_startRotator:function(){if(this.support){this._startProgress(this.options.interval)}this.slider=new this._timer(e.proxy(function(){if(this.support){this._resetProgress(0)}this._next();this._startRotator()},this),this.options.interval)},_timer:function(e,n){var r,i,s=n;this.pause=function(){t.clearTimeout(r);s-=new Date-i;return s};this.resume=function(){i=new Date;r=t.setTimeout(e,s)};this.resume()},_pause:function(){this.remain=this.slider.pause();if(this.support){this._resetProgress(100-this.remain/this.options.interval*100)}},_start:function(){this.slider.resume();var e=this.remain;if(this.support){this._startProgress(e)}},_next:function(){this.$items.eq(this.current).removeClass("cbp-qtcurrent");this.current=this.current<this.itemsCount-1?this.current+1:0;this.$items.eq(this.current).addClass("cbp-qtcurrent")},_prev:function(){this.$items.eq(this.current).removeClass("cbp-qtcurrent");this.current=this.current<1?this.itemsCount-1:this.current-1;this.$items.eq(this.current).addClass("cbp-qtcurrent")},_changeSlide:function(e){this.pauseOn=false;this.remain=this.slider.pause();if(e=="next"){this._next()}else{this._prev()}this._resetProgress(0);this._startProgress(this.options.interval);this._startRotator()},_startProgress:function(t){setTimeout(e.proxy(function(){this.$progress.css({transition:"width "+t+"ms linear",width:"100%"})},this),25)},_resetProgress:function(e){this.$progress.css({transition:"none",width:e+"%"})},destroy:function(){if(this.support){this.$items.css("transition","none");this.$progress.remove()}this.$items.removeClass("cbp-qtcurrent").css({position:"relative","z-index":100,"pointer-events":"auto",opacity:1})}};var s=function(e){if(t.console){t.console.error(e)}};e.fn.cbpQTRotator=function(t){if(typeof t==="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=e.data(this,"cbpQTRotator");if(!r){s("cannot call methods on cbpQTRotator prior to initialization; "+"attempted to call method '"+t+"'");return}if(!e.isFunction(r[t])||t.charAt(0)==="_"){s("no such method '"+t+"' for cbpQTRotator instance");return}r[t].apply(r,n)})}else{this.each(function(){var n=e.data(this,"cbpQTRotator");if(n){n._init()}else{n=e.data(this,"cbpQTRotator",new e.CBPQTRotator(t,this))}})}return this}})(jQuery,window)