/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
;(function(e){e.fn.drag=function(l,g,k){var j=typeof l=="string"?l:"",h=e.isFunction(l)?l:e.isFunction(g)?g:null;if(j.indexOf("drag")!==0){j="drag"+j}k=(l==h?g:k)||{};return h?this.bind(j,k,h):this.trigger(j)};var b=e.event,a=b.special,d=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(j){var h=e.data(this,d.datakey),g=j.data||{};h.related+=1;e.each(d.defaults,function(k,l){if(g[k]!==undefined){h[k]=g[k]}})},remove:function(){e.data(this,d.datakey).related-=1},setup:function(){if(e.data(this,d.datakey)){return}var g=e.extend({related:0},d.defaults);e.data(this,d.datakey,g);b.add(this,"touchstart mousedown",d.init,g);if(this.attachEvent){this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var g=e.data(this,d.datakey)||{};if(g.related){return}e.removeData(this,d.datakey);b.remove(this,"touchstart mousedown",d.init);d.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",d.dontstart)}},init:function(j){if(d.touched){return}var g=j.data,h;if(j.which!=0&&g.which>0&&j.which!=g.which){return}if(e(j.target).is(g.not)){return}if(g.handle&&!e(j.target).closest(g.handle,j.currentTarget).length){return}d.touched=j.type=="touchstart"?this:null;g.propagates=1;g.mousedown=this;g.interactions=[d.interaction(this,g)];g.target=j.target;g.pageX=j.pageX;g.pageY=j.pageY;g.dragging=null;h=d.hijack(j,"draginit",g);if(!g.propagates){return}h=d.flatten(h);if(h&&h.length){g.interactions=[];e.each(h,function(){g.interactions.push(d.interaction(this,g))})}g.propagates=g.interactions.length;if(g.drop!==false&&a.drop){a.drop.handler(j,g)}d.textselect(false);if(d.touched){b.add(d.touched,"touchmove touchend",d.handler,g)}else{b.add(document,"mousemove mouseup",d.handler,g)}if(!d.touched||g.live){return false}},interaction:function(h,g){var j=e(h)[g.relative?"position":"offset"]()||{top:0,left:0};return{drag:h,callback:new d.callback(),droppable:[],offset:j}},handler:function(h){var g=h.data;switch(h.type){case !g.dragging&&"touchmove":h.preventDefault();case !g.dragging&&"mousemove":if(Math.pow(h.pageX-g.pageX,2)+Math.pow(h.pageY-g.pageY,2)<Math.pow(g.distance,2)){break}h.target=g.target;d.hijack(h,"dragstart",g);if(g.propagates){g.dragging=true}case"touchmove":h.preventDefault();case"mousemove":if(g.dragging){d.hijack(h,"drag",g);if(g.propagates){if(g.drop!==false&&a.drop){a.drop.handler(h,g)}break}h.type="mouseup"}case"touchend":case"mouseup":default:if(d.touched){b.remove(d.touched,"touchmove touchend",d.handler)}else{b.remove(document,"mousemove mouseup",d.handler)}if(g.dragging){if(g.drop!==false&&a.drop){a.drop.handler(h,g)}d.hijack(h,"dragend",g)}d.textselect(true);if(g.click===false&&g.dragging){e.data(g.mousedown,"suppress.click",new Date().getTime()+5)}g.dragging=d.touched=false;break}},hijack:function(h,o,r,p,k){if(!r){return}var q={event:h.originalEvent,type:h.type},m=o.indexOf("drop")?"drag":"drop",t,l=p||0,j,g,s,n=!isNaN(p)?p:r.interactions.length;h.type=o;h.originalEvent=null;r.results=[];do{if(j=r.interactions[l]){if(o!=="dragend"&&j.cancelled){continue}s=d.properties(h,r,j);j.results=[];e(k||j[m]||r.droppable).each(function(v,u){s.target=u;h.isPropagationStopped=function(){return false};t=u?b.dispatch.call(u,h,s):null;if(t===false){if(m=="drag"){j.cancelled=true;r.propagates-=1}if(o=="drop"){j[m][v]=null}}else{if(o=="dropinit"){j.droppable.push(d.element(t)||u)}}if(o=="dragstart"){j.proxy=e(d.element(t)||j.drag)[0]}j.results.push(t);delete h.result;if(o!=="dropinit"){return t}});r.results[l]=d.flatten(j.results);if(o=="dropinit"){j.droppable=d.flatten(j.droppable)}if(o=="dragstart"&&!j.cancelled){s.update()}}}while(++l<n);h.type=q.type;h.originalEvent=q.event;return d.flatten(r.results)},properties:function(j,g,h){var k=h.callback;k.drag=h.drag;k.proxy=h.proxy||h.drag;k.startX=g.pageX;k.startY=g.pageY;k.deltaX=j.pageX-g.pageX;k.deltaY=j.pageY-g.pageY;k.originalX=h.offset.left;k.originalY=h.offset.top;k.offsetX=k.originalX+k.deltaX;k.offsetY=k.originalY+k.deltaY;k.drop=d.flatten((h.drop||[]).slice());k.available=d.flatten((h.droppable||[]).slice());return k},element:function(g){if(g&&(g.jquery||g.nodeType==1)){return g}},flatten:function(g){return e.map(g,function(h){return h&&h.jquery?e.makeArray(h):h&&h.length?d.flatten(h):h})},textselect:function(g){e(document)[g?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",g?"":"none");document.unselectable=g?"off":"on"},dontstart:function(){return false},callback:function(){}};d.callback.prototype={update:function(){if(a.drop&&this.available.length){e.each(this.available,function(g){a.drop.locate(this,g)})}}};var f=b.dispatch;b.dispatch=function(g){if(e.data(this,"suppress."+g.type)-new Date().getTime()>0){e.removeData(this,"suppress."+g.type);return}return f.apply(this,arguments)};var c=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(h,j){if(j){var g=(j.touches&&j.touches[0])||(j.changedTouches&&j.changedTouches[0])||null;if(g){e.each(c.props,function(k,l){h[l]=g[l]})}}return h}};a.draginit=a.dragstart=a.dragend=d})(jQuery);
/*! 
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
;(function(d){d.fn.drop=function(j,e,h){var g=typeof j=="string"?j:"",f=d.isFunction(j)?j:d.isFunction(e)?e:null;if(g.indexOf("drop")!==0){g="drop"+g}h=(j==f?e:h)||{};return f?this.bind(g,h,f):this.trigger(g)};d.drop=function(e){e=e||{};b.multi=e.multi===true?Infinity:e.multi===false?1:!isNaN(e.multi)?e.multi:b.multi;b.delay=e.delay||b.delay;b.tolerance=d.isFunction(e.tolerance)?e.tolerance:e.tolerance===null?null:b.tolerance;b.mode=e.mode||b.mode||"intersect"};var c=d.event,a=c.special,b=d.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:true,add:function(f){var e=d.data(this,b.datakey);e.related+=1},remove:function(){d.data(this,b.datakey).related-=1},setup:function(){if(d.data(this,b.datakey)){return}var e={related:0,active:[],anyactive:0,winner:0,location:{}};d.data(this,b.datakey,e);b.targets.push(this)},teardown:function(){var f=d.data(this,b.datakey)||{};if(f.related){return}d.removeData(this,b.datakey);var e=this;b.targets=d.grep(b.targets,function(g){return(g!==e)})},handler:function(g,e){var f,h;if(!e){return}switch(g.type){case"mousedown":case"touchstart":h=d(b.targets);if(typeof e.drop=="string"){h=h.filter(e.drop)}h.each(function(){var j=d.data(this,b.datakey);j.active=[];j.anyactive=0;j.winner=0});e.droppable=h;a.drag.hijack(g,"dropinit",e);break;case"mousemove":case"touchmove":b.event=g;if(!b.timer){b.tolerate(e)}break;case"mouseup":case"touchend":b.timer=clearTimeout(b.timer);if(e.propagates){a.drag.hijack(g,"drop",e);a.drag.hijack(g,"dropend",e)}break}},locate:function(l,h){var m=d.data(l,b.datakey),g=d(l),j=g.offset()||{},e=g.outerHeight(),k=g.outerWidth(),f={elem:l,width:k,height:e,top:j.top,left:j.left,right:j.left+k,bottom:j.top+e};if(m){m.location=f;m.index=h;m.elem=l}return f},contains:function(e,f){return((f[0]||f.left)>=e.left&&(f[0]||f.right)<=e.right&&(f[1]||f.top)>=e.top&&(f[1]||f.bottom)<=e.bottom)},modes:{intersect:function(f,e,g){return this.contains(g,[f.pageX,f.pageY])?1000000000:this.modes.overlap.apply(this,arguments)},overlap:function(f,e,g){return Math.max(0,Math.min(g.bottom,e.bottom)-Math.max(g.top,e.top))*Math.max(0,Math.min(g.right,e.right)-Math.max(g.left,e.left))},fit:function(f,e,g){return this.contains(g,e)?1:0},middle:function(f,e,g){return this.contains(g,[e.left+e.width*0.5,e.top+e.height*0.5])?1:0}},sort:function(f,e){return(e.winner-f.winner)||(f.index-e.index)},tolerate:function(q){var k,e,n,j,l,m,g,p=0,f,h=q.interactions.length,r=[b.event.pageX,b.event.pageY],o=b.tolerance||b.modes[b.mode];do{if(f=q.interactions[p]){if(!f){return}f.drop=[];l=[];m=f.droppable.length;if(o){n=b.locate(f.proxy)}k=0;do{if(g=f.droppable[k]){j=d.data(g,b.datakey);e=j.location;if(!e){continue}j.winner=o?o.call(b,b.event,n,e):b.contains(e,r)?1:0;l.push(j)}}while(++k<m);l.sort(b.sort);k=0;do{if(j=l[k]){if(j.winner&&f.drop.length<b.multi){if(!j.active[p]&&!j.anyactive){if(a.drag.hijack(b.event,"dropstart",q,p,j.elem)[0]!==false){j.active[p]=1;j.anyactive+=1}else{j.winner=0}}if(j.winner){f.drop.push(j.elem)}}else{if(j.active[p]&&j.anyactive==1){a.drag.hijack(b.event,"dropend",q,p,j.elem);j.active[p]=0;j.anyactive-=1}}}}while(++k<m)}}while(++p<h);if(b.last&&r[0]==b.last.pageX&&r[1]==b.last.pageY){delete b.timer}else{b.timer=setTimeout(function(){b.tolerate(q)},b.delay)}b.last=b.event}};a.dropinit=a.dropstart=a.dropend=b})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-j)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});(function(b){var a={};var c={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",responsive:true,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4000,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,autoSlideForOnePage:false,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};b.fn.bxSlider=function(s){if(this.length==0){return this}if(this.length>1){this.each(function(){b(this).bxSlider(s)});return this}var j={};var H=this;a.el=this;var J=b(window).width();var M=b(window).height();var C=function(){j.settings=b.extend({},c,s);j.settings.slideWidth=parseInt(j.settings.slideWidth);j.children=H.children(j.settings.slideSelector);if(j.children.length<j.settings.minSlides){j.settings.minSlides=j.children.length}if(j.children.length<j.settings.maxSlides){j.settings.maxSlides=j.children.length}if(j.settings.randomStart){j.settings.startSlide=Math.floor(Math.random()*j.children.length)}j.active={index:j.settings.startSlide};j.carousel=j.settings.minSlides>1||j.settings.maxSlides>1;if(j.carousel){j.settings.preloadImages="all"}j.minThreshold=(j.settings.minSlides*j.settings.slideWidth)+((j.settings.minSlides-1)*j.settings.slideMargin);j.maxThreshold=(j.settings.maxSlides*j.settings.slideWidth)+((j.settings.maxSlides-1)*j.settings.slideMargin);j.working=false;j.controls={};j.interval=null;j.animProp=j.settings.mode=="vertical"?"top":"left";j.usingCSS=j.settings.useCSS&&j.settings.mode!="fade"&&(function(){var T=document.createElement("div");var S=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var R in S){if(T.style[S[R]]!==undefined){j.cssPrefix=S[R].replace("Perspective","").toLowerCase();j.animProp="-"+j.cssPrefix+"-transform";return true}}return false}());if(j.settings.mode=="vertical"){j.settings.maxSlides=j.settings.minSlides}H.data("origStyle",H.attr("style"));H.children(j.settings.slideSelector).each(function(){b(this).data("origStyle",b(this).attr("style"))});m()};var m=function(){H.wrap('<div class="'+j.settings.wrapperClass+'"><div class="bx-viewport"></div></div>');j.viewport=H.parent();j.loader=b('<div class="bx-loading" />');j.viewport.prepend(j.loader);H.css({width:j.settings.mode=="horizontal"?(j.children.length*100+215)+"%":"auto",position:"relative"});if(j.usingCSS&&j.settings.easing){H.css("-"+j.cssPrefix+"-transition-timing-function",j.settings.easing)}else{if(!j.settings.easing){j.settings.easing="swing"}}var R=A();j.viewport.css({width:"100%",overflow:"hidden",position:"relative"});j.viewport.parent().css({maxWidth:L()});if(!j.settings.pager){j.viewport.parent().css({margin:"0 auto 0px"})}j.children.css({"float":j.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"});j.children.css("width",D());if(j.settings.mode=="horizontal"&&j.settings.slideMargin>0){j.children.css("marginRight",j.settings.slideMargin)}if(j.settings.mode=="vertical"&&j.settings.slideMargin>0){j.children.css("marginBottom",j.settings.slideMargin)}if(j.settings.mode=="fade"){j.children.css({position:"absolute",zIndex:0,display:"none"});j.children.eq(j.settings.startSlide).css({zIndex:j.settings.slideZIndex,display:"block"})}j.controls.el=b('<div class="bx-controls" />');if(j.settings.captions){z()}j.active.last=j.settings.startSlide==v()-1;if(j.settings.video){H.fitVids()}var S=j.children.eq(j.settings.startSlide);if(j.settings.preloadImages=="all"){S=j.children}if(!j.settings.ticker){if(j.settings.pager){O()}if(j.settings.controls){k()}if(j.settings.auto&&j.settings.autoControls){K()}if(j.settings.controls||j.settings.autoControls||j.settings.pager){j.viewport.after(j.controls.el)}}else{j.settings.pager=false}d(S,t)};var d=function(R,U){var T=R.find("img, iframe").length;if(T==0){U();return}var S=0;R.find("img, iframe").each(function(){b(this).one("load",function(){if(++S==T){U()}}).each(function(){if(this.complete){b(this).load()}})})};var t=function(){if(j.settings.infiniteLoop&&j.settings.mode!="fade"&&!j.settings.ticker){var T=j.settings.mode=="vertical"?j.settings.minSlides:j.settings.maxSlides;var S=j.children.slice(0,T).clone().addClass("bx-clone");var R=j.children.slice(-T).clone().addClass("bx-clone");H.append(S).prepend(R)}j.loader.remove();h();if(j.settings.mode=="vertical"){j.settings.adaptiveHeight=true}j.viewport.height(o());H.redrawSlider();j.settings.onSliderLoad(j.active.index);j.initialized=true;if(j.settings.responsive){b(window).bind("resize",n)}if(j.settings.auto&&j.settings.autoStart&&(v()>1||j.settings.autoSlideForOnePage)){e()}if(j.settings.ticker){F()}if(j.settings.pager){Q(j.settings.startSlide)}if(j.settings.controls){l()}if(j.settings.touchEnabled&&!j.settings.ticker){f()}};var o=function(){var R=0;var T=b();if(j.settings.mode!="vertical"&&!j.settings.adaptiveHeight){T=j.children}else{if(!j.carousel){T=j.children.eq(j.active.index)}else{var S=j.settings.moveSlides==1?j.active.index:j.active.index*q();T=j.children.eq(S);for(i=1;i<=j.settings.maxSlides-1;i++){if(S+i>=j.children.length){T=T.add(j.children.eq(i-1))}else{T=T.add(j.children.eq(S+i))}}}}if(j.settings.mode=="vertical"){T.each(function(U){R+=b(this).outerHeight()});if(j.settings.slideMargin>0){R+=j.settings.slideMargin*(j.settings.minSlides-1)}}else{R=Math.max.apply(Math,T.map(function(){return b(this).outerHeight(false)}).get())}if(j.viewport.css("box-sizing")=="border-box"){R+=parseFloat(j.viewport.css("padding-top"))+parseFloat(j.viewport.css("padding-bottom"))+parseFloat(j.viewport.css("border-top-width"))+parseFloat(j.viewport.css("border-bottom-width"))}else{if(j.viewport.css("box-sizing")=="padding-box"){R+=parseFloat(j.viewport.css("padding-top"))+parseFloat(j.viewport.css("padding-bottom"))}}return R};var L=function(){var R="100%";if(j.settings.slideWidth>0){if(j.settings.mode=="horizontal"){R=(j.settings.maxSlides*j.settings.slideWidth)+((j.settings.maxSlides-1)*j.settings.slideMargin)}else{R=j.settings.slideWidth}}return R};var D=function(){var S=j.settings.slideWidth;var R=j.viewport.width();if(j.settings.slideWidth==0||(j.settings.slideWidth>R&&!j.carousel)||j.settings.mode=="vertical"){S=R}else{if(j.settings.maxSlides>1&&j.settings.mode=="horizontal"){if(R>j.maxThreshold){}else{if(R<j.minThreshold){S=(R-(j.settings.slideMargin*(j.settings.minSlides-1)))/j.settings.minSlides}}}}return S};var A=function(){var S=1;if(j.settings.mode=="horizontal"&&j.settings.slideWidth>0){if(j.viewport.width()<j.minThreshold){S=j.settings.minSlides}else{if(j.viewport.width()>j.maxThreshold){S=j.settings.maxSlides}else{var R=j.children.first().width()+j.settings.slideMargin;S=Math.floor((j.viewport.width()+j.settings.slideMargin)/R)}}}else{if(j.settings.mode=="vertical"){S=j.settings.minSlides}}return S};var v=function(){var S=0;if(j.settings.moveSlides>0){if(j.settings.infiniteLoop){S=Math.ceil(j.children.length/q())}else{var T=0;var R=0;while(T<j.children.length){++S;T=R+A();R+=j.settings.moveSlides<=A()?j.settings.moveSlides:A()}}}else{S=Math.ceil(j.children.length/A())}return S};var q=function(){if(j.settings.moveSlides>0&&j.settings.moveSlides<=A()){return j.settings.moveSlides}return A()};var h=function(){if(j.children.length>j.settings.maxSlides&&j.active.last&&!j.settings.infiniteLoop){if(j.settings.mode=="horizontal"){var T=j.children.last();var R=T.position();B(-(R.left-(j.viewport.width()-T.outerWidth())),"reset",0)}else{if(j.settings.mode=="vertical"){var S=j.children.length-j.settings.minSlides;var R=j.children.eq(S).position();B(-R.top,"reset",0)}}}else{var R=j.children.eq(j.active.index*q()).position();if(j.active.index==v()-1){j.active.last=true}if(R!=undefined){if(j.settings.mode=="horizontal"){B(-R.left,"reset",0)}else{if(j.settings.mode=="vertical"){B(-R.top,"reset",0)}}}}};var B=function(T,S,U,W){if(j.usingCSS){var V=j.settings.mode=="vertical"?"translate3d(0, "+T+"px, 0)":"translate3d("+T+"px, 0, 0)";H.css("-"+j.cssPrefix+"-transition-duration",U/1000+"s");if(S=="slide"){H.css(j.animProp,V);H.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){H.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");p()})}else{if(S=="reset"){H.css(j.animProp,V)}else{if(S=="ticker"){H.css("-"+j.cssPrefix+"-transition-timing-function","linear");H.css(j.animProp,V);H.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){H.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");B(W.resetValue,"reset",0);u()})}}}}else{var R={};R[j.animProp]=T;if(S=="slide"){H.animate(R,U,j.settings.easing,function(){p()})}else{if(S=="reset"){H.css(j.animProp,T)}else{if(S=="ticker"){H.animate(R,speed,"linear",function(){B(W.resetValue,"reset",0);u()})}}}}};var r=function(){var U="";var T=v();for(var S=0;S<T;S++){var R="";if(j.settings.buildPager&&b.isFunction(j.settings.buildPager)){R=j.settings.buildPager(S);j.pagerEl.addClass("bx-custom-pager")}else{R=S+1;j.pagerEl.addClass("bx-default-pager")}U+='<div class="bx-pager-item"><a href="" data-slide-index="'+S+'" class="bx-pager-link">'+R+"</a></div>"}j.pagerEl.html(U)};var O=function(){if(!j.settings.pagerCustom){j.pagerEl=b('<div class="bx-pager" />');if(j.settings.pagerSelector){b(j.settings.pagerSelector).html(j.pagerEl)}else{j.controls.el.addClass("bx-has-pager").append(j.pagerEl)}r()}else{j.pagerEl=b(j.settings.pagerCustom)}j.pagerEl.on("click","a",x)};var k=function(){j.controls.next=b('<a class="bx-next" href="">'+j.settings.nextText+"</a>");j.controls.prev=b('<a class="bx-prev" href="">'+j.settings.prevText+"</a>");j.controls.next.bind("click",g);j.controls.prev.bind("click",N);if(j.settings.nextSelector){b(j.settings.nextSelector).append(j.controls.next)}if(j.settings.prevSelector){b(j.settings.prevSelector).append(j.controls.prev)}if(!j.settings.nextSelector&&!j.settings.prevSelector){j.controls.directionEl=b('<div class="bx-controls-direction" />');j.controls.directionEl.append(j.controls.prev).append(j.controls.next);j.controls.el.addClass("bx-has-controls-direction").append(j.controls.directionEl)}};var K=function(){j.controls.start=b('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+j.settings.startText+"</a></div>");j.controls.stop=b('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+j.settings.stopText+"</a></div>");j.controls.autoEl=b('<div class="bx-controls-auto" />');j.controls.autoEl.on("click",".bx-start",w);j.controls.autoEl.on("click",".bx-stop",P);if(j.settings.autoControlsCombine){j.controls.autoEl.append(j.controls.start)}else{j.controls.autoEl.append(j.controls.start).append(j.controls.stop)}if(j.settings.autoControlsSelector){b(j.settings.autoControlsSelector).html(j.controls.autoEl)}else{j.controls.el.addClass("bx-has-controls-auto").append(j.controls.autoEl)}G(j.settings.autoStart?"stop":"start")};var z=function(){j.children.each(function(R){var S=b(this).find("img:first").attr("title");if(S!=undefined&&(""+S).length){b(this).append('<div class="bx-caption"><span>'+S+"</span></div>")}})};var g=function(R){if(j.settings.auto){H.stopAuto()}H.goToNextSlide();R.preventDefault()};var N=function(R){if(j.settings.auto){H.stopAuto()}H.goToPrevSlide();R.preventDefault()};var w=function(R){H.startAuto();R.preventDefault()};var P=function(R){H.stopAuto();R.preventDefault()};var x=function(T){if(j.settings.auto){H.stopAuto()}var S=b(T.currentTarget);if(S.attr("data-slide-index")!==undefined){var R=parseInt(S.attr("data-slide-index"));if(R!=j.active.index){H.goToSlide(R)}T.preventDefault()}};var Q=function(S){var R=j.children.length;if(j.settings.pagerType=="short"){if(j.settings.maxSlides>1){R=Math.ceil(j.children.length/j.settings.maxSlides)}j.pagerEl.html((S+1)+j.settings.pagerShortSeparator+R);return}j.pagerEl.find("a").removeClass("active");j.pagerEl.each(function(T,U){b(U).find("a").eq(S).addClass("active")})};var p=function(){if(j.settings.infiniteLoop){var R="";if(j.active.index==0){R=j.children.eq(0).position()}else{if(j.active.index==v()-1&&j.carousel){R=j.children.eq((v()-1)*q()).position()}else{if(j.active.index==j.children.length-1){R=j.children.eq(j.children.length-1).position()}}}if(R){if(j.settings.mode=="horizontal"){B(-R.left,"reset",0)}else{if(j.settings.mode=="vertical"){B(-R.top,"reset",0)}}}}j.working=false;j.settings.onSlideAfter(j.children.eq(j.active.index),j.oldIndex,j.active.index)};var G=function(R){if(j.settings.autoControlsCombine){j.controls.autoEl.html(j.controls[R])}else{j.controls.autoEl.find("a").removeClass("active");j.controls.autoEl.find("a:not(.bx-"+R+")").addClass("active")}};var l=function(){if(v()==1){j.controls.prev.addClass("disabled");j.controls.next.addClass("disabled")}else{if(!j.settings.infiniteLoop&&j.settings.hideControlOnEnd){if(j.active.index==0){j.controls.prev.addClass("disabled");j.controls.next.removeClass("disabled")}else{if(j.active.index==v()-1){j.controls.next.addClass("disabled");j.controls.prev.removeClass("disabled")}else{j.controls.prev.removeClass("disabled");j.controls.next.removeClass("disabled")}}}}};var e=function(){if(j.settings.autoDelay>0){var R=setTimeout(H.startAuto,j.settings.autoDelay)}else{H.startAuto()}if(j.settings.autoHover){H.hover(function(){if(j.interval){H.stopAuto(true);j.autoPaused=true}},function(){if(j.autoPaused){H.startAuto(true);j.autoPaused=null}})}};var F=function(){var S=0;if(j.settings.autoDirection=="next"){H.append(j.children.clone().addClass("bx-clone"))}else{H.prepend(j.children.clone().addClass("bx-clone"));var R=j.children.first().position();S=j.settings.mode=="horizontal"?-R.left:-R.top}B(S,"reset",0);j.settings.pager=false;j.settings.controls=false;j.settings.autoControls=false;if(j.settings.tickerHover&&!j.usingCSS){j.viewport.hover(function(){H.stop()},function(){var W=0;j.children.each(function(X){W+=j.settings.mode=="horizontal"?b(this).outerWidth(true):b(this).outerHeight(true)});var T=j.settings.speed/W;var U=j.settings.mode=="horizontal"?"left":"top";var V=T*(W-(Math.abs(parseInt(H.css(U)))));u(V)})}u()};var u=function(W){speed=W?W:j.settings.speed;var R={left:0,top:0};var U={left:0,top:0};if(j.settings.autoDirection=="next"){R=H.find(".bx-clone").first().position()}else{U=j.children.first().position()}var T=j.settings.mode=="horizontal"?-R.left:-R.top;var S=j.settings.mode=="horizontal"?-U.left:-U.top;var V={resetValue:S};B(T,"ticker",speed,V)};var f=function(){j.touch={start:{x:0,y:0},end:{x:0,y:0}};j.viewport.bind("touchstart",E)};var E=function(R){if(j.working){R.preventDefault()}else{j.touch.originalPos=H.position();var S=R.originalEvent;j.touch.start.x=S.changedTouches[0].pageX;j.touch.start.y=S.changedTouches[0].pageY;j.viewport.bind("touchmove",I);j.viewport.bind("touchend",y)}};var I=function(S){var W=S.originalEvent;var T=Math.abs(W.changedTouches[0].pageX-j.touch.start.x);var V=Math.abs(W.changedTouches[0].pageY-j.touch.start.y);if((T*3)>V&&j.settings.preventDefaultSwipeX){S.preventDefault()}else{if((V*3)>T&&j.settings.preventDefaultSwipeY){S.preventDefault()}}if(j.settings.mode!="fade"&&j.settings.oneToOneTouch){var R=0;if(j.settings.mode=="horizontal"){var U=W.changedTouches[0].pageX-j.touch.start.x;R=j.touch.originalPos.left+U}else{var U=W.changedTouches[0].pageY-j.touch.start.y;R=j.touch.originalPos.top+U}B(R,"reset",0)}};var y=function(S){j.viewport.unbind("touchmove",I);var U=S.originalEvent;var R=0;j.touch.end.x=U.changedTouches[0].pageX;j.touch.end.y=U.changedTouches[0].pageY;if(j.settings.mode=="fade"){var T=Math.abs(j.touch.start.x-j.touch.end.x);if(T>=j.settings.swipeThreshold){j.touch.start.x>j.touch.end.x?H.goToNextSlide():H.goToPrevSlide();H.stopAuto()}}else{var T=0;if(j.settings.mode=="horizontal"){T=j.touch.end.x-j.touch.start.x;R=j.touch.originalPos.left}else{T=j.touch.end.y-j.touch.start.y;R=j.touch.originalPos.top}if(!j.settings.infiniteLoop&&((j.active.index==0&&T>0)||(j.active.last&&T<0))){B(R,"reset",200)}else{if(Math.abs(T)>=j.settings.swipeThreshold){T<0?H.goToNextSlide():H.goToPrevSlide();H.stopAuto()}else{B(R,"reset",200)}}}j.viewport.unbind("touchend",y)};var n=function(S){if(!j.initialized){return}var R=b(window).width();var T=b(window).height();if(J!=R||M!=T){J=R;M=T;H.redrawSlider();j.settings.onSliderResize.call(H,j.active.index)}};H.goToSlide=function(V,X){if(j.working||j.active.index==V){return}j.working=true;j.oldIndex=j.active.index;if(V<0){j.active.index=v()-1}else{if(V>=v()){j.active.index=0}else{j.active.index=V}}j.settings.onSlideBefore(j.children.eq(j.active.index),j.oldIndex,j.active.index);if(X=="next"){j.settings.onSlideNext(j.children.eq(j.active.index),j.oldIndex,j.active.index)}else{if(X=="prev"){j.settings.onSlidePrev(j.children.eq(j.active.index),j.oldIndex,j.active.index)}}j.active.last=j.active.index>=v()-1;if(j.settings.pager){Q(j.active.index)}if(j.settings.controls){l()}if(j.settings.mode=="fade"){if(j.settings.adaptiveHeight&&j.viewport.height()!=o()){j.viewport.animate({height:o()},j.settings.adaptiveHeightSpeed)}j.children.filter(":visible").fadeOut(j.settings.speed).css({zIndex:0});j.children.eq(j.active.index).css("zIndex",j.settings.slideZIndex+1).fadeIn(j.settings.speed,function(){b(this).css("zIndex",j.settings.slideZIndex);p()})}else{if(j.settings.adaptiveHeight&&j.viewport.height()!=o()){j.viewport.animate({height:o()},j.settings.adaptiveHeightSpeed)}var W=0;var U={left:0,top:0};if(!j.settings.infiniteLoop&&j.carousel&&j.active.last){if(j.settings.mode=="horizontal"){var R=j.children.eq(j.children.length-1);U=R.position();W=j.viewport.width()-R.outerWidth()}else{var T=j.children.length-j.settings.minSlides;U=j.children.eq(T).position()}}else{if(j.carousel&&j.active.last&&X=="prev"){var Z=j.settings.moveSlides==1?j.settings.maxSlides-q():((v()-1)*q())-(j.children.length-j.settings.maxSlides);var R=H.children(".bx-clone").eq(Z);U=R.position()}else{if(X=="next"&&j.active.index==0){U=H.find("> .bx-clone").eq(j.settings.maxSlides).position();j.active.last=false}else{if(V>=0){var S=V*q();U=j.children.eq(S).position()}}}}if("undefined"!==typeof(U)){var Y=j.settings.mode=="horizontal"?-(U.left-W):-U.top;B(Y,"slide",j.settings.speed)}}};H.goToNextSlide=function(){if(!j.settings.infiniteLoop&&j.active.last){return}var R=parseInt(j.active.index)+1;H.goToSlide(R,"next")};H.goToPrevSlide=function(){if(!j.settings.infiniteLoop&&j.active.index==0){return}var R=parseInt(j.active.index)-1;H.goToSlide(R,"prev")};H.startAuto=function(R){if(j.interval){return}j.interval=setInterval(function(){j.settings.autoDirection=="next"?H.goToNextSlide():H.goToPrevSlide()},j.settings.pause);if(j.settings.autoControls&&R!=true){G("stop")}};H.stopAuto=function(R){if(!j.interval){return}clearInterval(j.interval);j.interval=null;if(j.settings.autoControls&&R!=true){G("start")}};H.getCurrentSlide=function(){return j.active.index};H.getCurrentSlideElement=function(){return j.children.eq(j.active.index)};H.getSlideCount=function(){return j.children.length};H.redrawSlider=function(){j.children.add(H.find(".bx-clone")).width(D());j.viewport.css("height",o());if(!j.settings.ticker){h()}if(j.active.last){j.active.index=v()-1}if(j.active.index>=v()){j.active.last=true}if(j.settings.pager&&!j.settings.pagerCustom){r();Q(j.active.index)}};H.destroySlider=function(){if(!j.initialized){return}j.initialized=false;b(".bx-clone",this).remove();j.children.each(function(){b(this).data("origStyle")!=undefined?b(this).attr("style",b(this).data("origStyle")):b(this).removeAttr("style")});b(this).data("origStyle")!=undefined?this.attr("style",b(this).data("origStyle")):b(this).removeAttr("style");b(this).unwrap().unwrap();if(j.controls.el){j.controls.el.remove()}if(j.controls.next){j.controls.next.remove()}if(j.controls.prev){j.controls.prev.remove()}if(j.pagerEl&&j.settings.controls){j.pagerEl.remove()}b(".bx-caption",this).remove();if(j.controls.autoEl){j.controls.autoEl.remove()}clearInterval(j.interval);if(j.settings.responsive){b(window).unbind("resize",n)}};H.reloadSlider=function(R){if(R!=undefined){s=R}H.destroySlider();C()};C();return this}})(jQuery);(function(b){var c,d,a;b.extend({roundaboutShapes:{def:"lazySusan",lazySusan:function(g,e,f){return{x:Math.sin(g+e),y:(Math.sin(g+3*Math.PI/2+e)/8)*f,z:(Math.cos(g+e)+1)/2,scale:(Math.sin(g+Math.PI/2+e)/2)+0.5}}}});c={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:0.4,maxOpacity:1,minScale:0.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:true,clickToFocusCallback:function(){},focusBearing:0,shape:"lazySusan",debug:false,childSelector:"li",startingChild:null,reflect:false,floatComparisonThreshold:0.001,autoplay:false,autoplayDuration:1000,autoplayPauseOnHover:false,autoplayCallback:function(){},autoplayInitialDelay:0,enableDrag:false,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:true,triggerBlurEvents:true,responsive:false};d={autoplayInterval:null,autoplayIsRunning:false,autoplayStartTimeout:null,animating:false,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:false,lastAnimationStep:false};a={init:function(f,j,h){var g,e=(new Date()).getTime();f=(typeof f==="object")?f:{};j=(b.isFunction(j))?j:function(){};j=(b.isFunction(f))?f:j;g=b.extend({},c,f,d);return this.each(function(){var l=b(this),k=l.children(g.childSelector).length,o=360/k,n=(g.startingChild&&g.startingChild>(k-1))?(k-1):g.startingChild,m=(g.startingChild===null)?g.bearing:360-(n*o),p=(l.css("position")!=="static")?l.css("position"):"relative";l.css({padding:0,position:p}).addClass("roundabout-holder").data("roundabout",b.extend({},g,{startingChild:n,bearing:m,oppositeOfFocusBearing:a.normalize.apply(null,[g.focusBearing-180]),dragBearing:m,period:o}));if(h){l.unbind(".roundabout").children(g.childSelector).unbind(".roundabout")}else{if(g.responsive){b(window).bind("resize",function(){a.stopAutoplay.apply(l);a.relayoutChildren.apply(l)})}}if(g.clickToFocus){l.children(g.childSelector).each(function(q){b(this).bind("click.roundabout",function(){var r=a.getPlacement.apply(l,[q]);if(!a.isInFocus.apply(l,[r])){a.stopAnimation.apply(b(this));if(!l.data("roundabout").animating){a.animateBearingToFocus.apply(l,[r,l.data("roundabout").clickToFocusCallback])}return false}})})}if(g.btnNext){b(g.btnNext).bind("click.roundabout",function(){if(!l.data("roundabout").animating){a.animateToNextChild.apply(l,[l.data("roundabout").btnNextCallback])}return false})}if(g.btnPrev){b(g.btnPrev).bind("click.roundabout",function(){a.animateToPreviousChild.apply(l,[l.data("roundabout").btnPrevCallback]);return false})}if(g.btnToggleAutoplay){b(g.btnToggleAutoplay).bind("click.roundabout",function(){a.toggleAutoplay.apply(l);return false})}if(g.btnStartAutoplay){b(g.btnStartAutoplay).bind("click.roundabout",function(){a.startAutoplay.apply(l);return false})}if(g.btnStopAutoplay){b(g.btnStopAutoplay).bind("click.roundabout",function(){a.stopAutoplay.apply(l);return false})}if(g.autoplayPauseOnHover){l.bind("mouseenter.roundabout.autoplay",function(){a.stopAutoplay.apply(l,[true])}).bind("mouseleave.roundabout.autoplay",function(){a.startAutoplay.apply(l)})}if(g.enableDrag){if(!b.isFunction(l.drag)){if(g.debug){alert("You do not have the drag plugin loaded.")}}else{if(!b.isFunction(l.drop)){if(g.debug){alert("You do not have the drop plugin loaded.")}}else{l.drag(function(s,q){var r=l.data("roundabout"),t=(r.dragAxis.toLowerCase()==="x")?"deltaX":"deltaY";a.stopAnimation.apply(l);a.setBearing.apply(l,[r.dragBearing+q[t]/r.dragFactor])}).drop(function(r){var q=l.data("roundabout"),s=a.getAnimateToMethod(q.dropAnimateTo);a.allowAnimation.apply(l);a[s].apply(l,[q.dropDuration,q.dropEasing,q.dropCallback]);q.dragBearing=q.period*a.getNearestChild.apply(l)})}}l.each(function(){var q=b(this).get(0),s=b(this).data("roundabout"),r=(s.dragAxis.toLowerCase()==="x")?"pageX":"pageY",t=a.getAnimateToMethod(s.dropAnimateTo);if(q.addEventListener){q.addEventListener("touchstart",function(u){s.touchMoveStartPosition=u.touches[0][r]},false);q.addEventListener("touchmove",function(u){var v=(u.touches[0][r]-s.touchMoveStartPosition)/s.dragFactor;u.preventDefault();a.stopAnimation.apply(b(this));a.setBearing.apply(b(this),[s.dragBearing+v])},false);q.addEventListener("touchend",function(u){u.preventDefault();a.allowAnimation.apply(b(this));t=a.getAnimateToMethod(s.dropAnimateTo);a[t].apply(b(this),[s.dropDuration,s.dropEasing,s.dropCallback]);s.dragBearing=s.period*a.getNearestChild.apply(b(this))},false)}})}a.initChildren.apply(l,[j,h])})},initChildren:function(h,f){var e=b(this),g=e.data("roundabout");h=h||function(){};e.children(g.childSelector).each(function(m){var k,j,l,n=a.getPlacement.apply(e,[m]);if(f&&b(this).data("roundabout")){k=b(this).data("roundabout").startWidth;j=b(this).data("roundabout").startHeight;l=b(this).data("roundabout").startFontSize}b(this).addClass("roundabout-moveable-item").css("position","absolute");b(this).data("roundabout",{startWidth:k||b(this).width(),startHeight:j||b(this).height(),startFontSize:l||parseInt(b(this).css("font-size"),10),degrees:n,backDegrees:a.normalize.apply(null,[n-180]),childNumber:m,currentScale:1,parent:e})});a.updateChildren.apply(e);if(g.autoplay){g.autoplayStartTimeout=setTimeout(function(){a.startAutoplay.apply(e)},g.autoplayInitialDelay)}e.trigger("ready");h.apply(e);return e},updateChildren:function(){return this.each(function(){var e=b(this),f=e.data("roundabout"),h=-1,g={bearing:f.bearing,tilt:f.tilt,stage:{width:Math.floor(b(this).width()*0.9),height:Math.floor(b(this).height()*0.9)},animating:f.animating,inFocus:f.childInFocus,focusBearingRadian:a.degToRad.apply(null,[f.focusBearing]),shape:b.roundaboutShapes[f.shape]||b.roundaboutShapes[b.roundaboutShapes.def]};g.midStage={width:g.stage.width/2,height:g.stage.height/2};g.nudge={width:g.midStage.width+(g.stage.width*0.05),height:g.midStage.height+(g.stage.height*0.05)};g.zValues={min:f.minZ,max:f.maxZ,diff:f.maxZ-f.minZ};g.opacity={min:f.minOpacity,max:f.maxOpacity,diff:f.maxOpacity-f.minOpacity};g.scale={min:f.minScale,max:f.maxScale,diff:f.maxScale-f.minScale};e.children(f.childSelector).each(function(j){if(a.updateChild.apply(e,[b(this),g,j,function(){b(this).trigger("ready")}])&&(!g.animating||f.lastAnimationStep)){h=j;b(this).addClass("roundabout-in-focus")}else{b(this).removeClass("roundabout-in-focus")}});if(h!==g.inFocus){if(f.triggerBlurEvents){e.children(f.childSelector).eq(g.inFocus).trigger("blur")}f.childInFocus=h;if(f.triggerFocusEvents&&h!==-1){e.children(f.childSelector).eq(h).trigger("focus")}}e.trigger("childrenUpdated")})},updateChild:function(h,g,e,n){var m,o=this,f=b(h),k=f.data("roundabout"),j=[],l=a.degToRad.apply(null,[(360-k.degrees)+g.bearing]);n=n||function(){};l=a.normalizeRad.apply(null,[l]);m=g.shape(l,g.focusBearingRadian,g.tilt);m.scale=(m.scale>1)?1:m.scale;m.adjustedScale=(g.scale.min+(g.scale.diff*m.scale)).toFixed(4);m.width=(m.adjustedScale*k.startWidth).toFixed(4);m.height=(m.adjustedScale*k.startHeight).toFixed(4);f.css({left:((m.x*g.midStage.width+g.nudge.width)-m.width/2).toFixed(0)+"px",top:((m.y*g.midStage.height+g.nudge.height)-m.height/2).toFixed(0)+"px",width:m.width+"px",height:m.height+"px",opacity:(g.opacity.min+(g.opacity.diff*m.scale)).toFixed(2),zIndex:Math.round(g.zValues.min+(g.zValues.diff*m.z)),fontSize:(m.adjustedScale*k.startFontSize).toFixed(1)+"px"});k.currentScale=m.adjustedScale;if(o.data("roundabout").debug){j.push('<div style="font-weight: normal; font-size: 10px; padding: 2px; width: '+f.css("width")+'; background-color: #ffc;">');j.push('<strong style="font-size: 12px; white-space: nowrap;">Child '+e+"</strong><br />");j.push("<strong>left:</strong> "+f.css("left")+"<br />");j.push("<strong>top:</strong> "+f.css("top")+"<br />");j.push("<strong>width:</strong> "+f.css("width")+"<br />");j.push("<strong>opacity:</strong> "+f.css("opacity")+"<br />");j.push("<strong>height:</strong> "+f.css("height")+"<br />");j.push("<strong>z-index:</strong> "+f.css("z-index")+"<br />");j.push("<strong>font-size:</strong> "+f.css("font-size")+"<br />");j.push("<strong>scale:</strong> "+f.data("roundabout").currentScale);j.push("</div>");f.html(j.join(""))}f.trigger("reposition");n.apply(o);return a.isInFocus.apply(o,[k.degrees])},setBearing:function(e,f){f=f||function(){};e=a.normalize.apply(null,[e]);this.each(function(){var m,g,k,j=b(this),l=j.data("roundabout"),h=l.bearing;l.bearing=e;j.trigger("bearingSet");a.updateChildren.apply(j);m=Math.abs(h-e);if(!l.animating||m>180){return}m=Math.abs(h-e);j.children(l.childSelector).each(function(o){var n;if(a.isChildBackDegreesBetween.apply(b(this),[e,h])){n=(h>e)?"Clockwise":"Counterclockwise";b(this).trigger("move"+n+"ThroughBack")}})});f.apply(this);return this},adjustBearing:function(f,e){e=e||function(){};if(f===0){return this}this.each(function(){a.setBearing.apply(b(this),[b(this).data("roundabout").bearing+f])});e.apply(this);return this},setTilt:function(e,f){f=f||function(){};this.each(function(){b(this).data("roundabout").tilt=e;a.updateChildren.apply(b(this))});f.apply(this);return this},adjustTilt:function(f,e){e=e||function(){};this.each(function(){a.setTilt.apply(b(this),[b(this).data("roundabout").tilt+f])});e.apply(this);return this},animateToBearing:function(f,g,k,h,j){var e=(new Date()).getTime();j=j||function(){};if(b.isFunction(h)){j=h;h=null}else{if(b.isFunction(k)){j=k;k=null}else{if(b.isFunction(g)){j=g;g=null}}}this.each(function(){var r,q,l,m=b(this),p=m.data("roundabout"),n=(!g)?p.duration:g,o=(k)?k:p.easing||"swing";if(!h){h={timerStart:e,start:p.bearing,totalTime:n}}r=e-h.timerStart;if(p.stopAnimation){a.allowAnimation.apply(m);p.animating=false;return}if(r<n){if(!p.animating){m.trigger("animationStart")}p.animating=true;if(typeof b.easing.def==="string"){q=b.easing[o]||b.easing[b.easing.def];l=q(null,r,h.start,f-h.start,h.totalTime)}else{l=b.easing[o]((r/h.totalTime),r,h.start,f-h.start,h.totalTime)}if(a.compareVersions.apply(null,[b().jquery,"1.7.2"])>=0&&!(b.easing.easeOutBack)){l=h.start+((f-h.start)*l)}l=a.normalize.apply(null,[l]);p.dragBearing=l;a.setBearing.apply(m,[l,function(){setTimeout(function(){a.animateToBearing.apply(m,[f,n,o,h,j])},0)}])}else{p.lastAnimationStep=true;f=a.normalize.apply(null,[f]);a.setBearing.apply(m,[f,function(){m.trigger("animationEnd")}]);p.animating=false;p.lastAnimationStep=false;p.dragBearing=f;j.apply(m)}});return this},animateToNearbyChild:function(e,g){var f=e[0],j=e[1],h=e[2]||function(){};if(b.isFunction(j)){h=j;j=null}else{if(b.isFunction(f)){h=f;f=null}}return this.each(function(){var n,l,k=b(this),p=k.data("roundabout"),m=(!p.reflect)?p.bearing%360:p.bearing,o=k.children(p.childSelector).length;if(!p.animating){if((p.reflect&&g==="previous")||(!p.reflect&&g==="next")){m=(Math.abs(m)<p.floatComparisonThreshold)?360:m;for(n=0;n<o;n+=1){l={lower:(p.period*n),upper:(p.period*(n+1))};l.upper=(n===o-1)?360:l.upper;if(m<=Math.ceil(l.upper)&&m>=Math.floor(l.lower)){if(o===2&&m===360){a.animateToDelta.apply(k,[-180,f,j,h])}else{a.animateBearingToFocus.apply(k,[l.lower,f,j,h])}break}}}else{m=(Math.abs(m)<p.floatComparisonThreshold||360-Math.abs(m)<p.floatComparisonThreshold)?0:m;for(n=o-1;n>=0;n-=1){l={lower:p.period*n,upper:p.period*(n+1)};l.upper=(n===o-1)?360:l.upper;if(m>=Math.floor(l.lower)&&m<Math.ceil(l.upper)){if(o===2&&m===360){a.animateToDelta.apply(k,[180,f,j,h])}else{a.animateBearingToFocus.apply(k,[l.upper,f,j,h])}break}}}}})},animateToNearestChild:function(e,g,f){f=f||function(){};if(b.isFunction(g)){f=g;g=null}else{if(b.isFunction(e)){f=e;e=null}}return this.each(function(){var h=a.getNearestChild.apply(b(this));a.animateToChild.apply(b(this),[h,e,g,f])})},animateToChild:function(e,f,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(f)){g=f;f=null}}return this.each(function(){var l,j=b(this),k=j.data("roundabout");if(k.childInFocus!==e&&!k.animating){l=j.children(k.childSelector).eq(e);a.animateBearingToFocus.apply(j,[l.data("roundabout").degrees,f,h,g])}})},animateToNextChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var j=b(this).data("roundabout").bearing+f;a.animateToBearing.apply(b(this),[j,e,h,g])})},animateBearingToFocus:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var j=b(this).data("roundabout").bearing-f;j=(Math.abs(360-j)<Math.abs(j))?360-j:-j;j=(j>180)?-(360-j):j;if(j!==0){a.animateToDelta.apply(b(this),[j,e,h,g])}})},stopAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=true})},allowAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=false})},startAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};clearInterval(g.autoplayInterval);g.autoplayInterval=setInterval(function(){a.animateToNextChild.apply(f,[e])},g.autoplayDuration);g.autoplayIsRunning=true;f.trigger("autoplayStart")})},stopAutoplay:function(e){return this.each(function(){clearInterval(b(this).data("roundabout").autoplayInterval);b(this).data("roundabout").autoplayInterval=null;b(this).data("roundabout").autoplayIsRunning=false;if(!e){b(this).unbind(".autoplay")}b(this).trigger("autoplayStop")})},toggleAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};if(!a.isAutoplaying.apply(b(this))){a.startAutoplay.apply(b(this),[e])}else{a.stopAutoplay.apply(b(this),[e])}})},isAutoplaying:function(){return(this.data("roundabout").autoplayIsRunning)},changeAutoplayDuration:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");g.autoplayDuration=e;if(a.isAutoplaying.apply(f)){a.stopAutoplay.apply(f);setTimeout(function(){a.startAutoplay.apply(f)},10)}})},normalize:function(f){var e=f%360;return(e<0)?360+e:e},normalizeRad:function(e){while(e<0){e+=(Math.PI*2)}while(e>(Math.PI*2)){e-=(Math.PI*2)}return e},isChildBackDegreesBetween:function(f,e){var g=b(this).data("roundabout").backDegrees;if(f>e){return(g>=e&&g<f)}else{return(g<e&&g>=f)}},getAnimateToMethod:function(e){e=e.toLowerCase();if(e==="next"){return"animateToNextChild"}else{if(e==="previous"){return"animateToPreviousChild"}}return"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var e=b(this),f=b.extend({},e.data("roundabout"));f.startingChild=e.data("roundabout").childInFocus;a.init.apply(e,[f,null,true])})},getNearestChild:function(){var e=b(this),g=e.data("roundabout"),f=e.children(g.childSelector).length;if(!g.reflect){return((f)-(Math.round(g.bearing/g.period)%f))%f}else{return(Math.round(g.bearing/g.period)%f)}},degToRad:function(e){return a.normalize.apply(null,[e])*Math.PI/180},getPlacement:function(f){var e=this.data("roundabout");return(!e.reflect)?360-(e.period*f):e.period*f},isInFocus:function(j){var h,e=this,g=e.data("roundabout"),f=a.normalize.apply(null,[g.bearing]);j=a.normalize.apply(null,[j]);h=Math.abs(f-j);return(h<=g.floatComparisonThreshold||h>=360-g.floatComparisonThreshold)},getChildInFocus:function(){var e=b(this).data("roundabout");return(e.childInFocus>-1)?e.childInFocus:false},compareVersions:function(e,k){var g,j=e.split(/\./i),h=k.split(/\./i),f=(j.length>h.length)?j.length:h.length;for(g=0;g<=f;g++){if(j[g]&&!h[g]&&parseInt(j[g],10)!==0){return 1}else{if(h[g]&&!j[g]&&parseInt(h[g],10)!==0){return -1}else{if(j[g]===h[g]){continue}}}if(j[g]&&h[g]){if(parseInt(j[g],10)>parseInt(h[g],10)){return 1}else{return -1}}}return 0}};b.fn.roundabout=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||b.isFunction(e)||!e){return a.init.apply(this,arguments)}else{b.error("Method "+e+" does not exist for jQuery.roundabout.")}}}})(jQuery);